coordinator:
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
    limits:
      memory: "4Gi"
      cpu: "1000m"

env:
  - name: POLARIS_ROOT_PASSWORD
    valueFrom:
      secretKeyRef:
        name: trino-polaris-credentials
        key: polaris-root-password
  - name: AZURE_STORAGE_ACCOUNT_NAME
    valueFrom:
      secretKeyRef:
        name: iceberg-bucket-credentials
        key: AZURE_STORAGE_ACCOUNT_NAME
  - name: AZURE_TENANT_ID
    valueFrom:
      secretKeyRef:
        name: iceberg-bucket-credentials
        key: AZURE_TENANT_ID
  - name: AZURE_CLIENT_ID
    valueFrom:
      secretKeyRef:
        name: iceberg-bucket-credentials
        key: AZURE_CLIENT_ID

worker:
  replicas: 1
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
    limits:
      memory: "4Gi"
      cpu: "1000m"

server:
  workers: 1

catalogs:
  polaris: |
    connector.name=iceberg
    iceberg.catalog.type=rest
    iceberg.rest-catalog.uri=http://polaris.polaris.svc.cluster.local:8181/api/catalog
    iceberg.rest-catalog.warehouse=ao_catalog
    iceberg.rest-catalog.security=OAUTH2
    iceberg.rest-catalog.oauth2.credential=root:${ENV:POLARIS_ROOT_PASSWORD}
    iceberg.rest-catalog.oauth2.scope=PRINCIPAL_ROLE:ALL
    iceberg.rest-catalog.oauth2.server-uri=http://polaris.polaris.svc.cluster.local:8181/api/catalog/v1/oauth/tokens
    fs.native-azure.enabled=true

  # Keep the default test catalogs for verification
  tpch: |
    connector.name=tpch
    tpch.splits-per-node=4
  tpcds: |
    connector.name=tpcds
    tpcds.splits-per-node=4
